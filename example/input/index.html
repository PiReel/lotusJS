<!DOCTYPE html>
<html>
<head>
    <title>LotusJS Form Components Example</title>
    <link rel="stylesheet" type="text/css" href="input.css" />
    <script type="text/javascript" src="node_modules/x-tag/lib/webcomponents.js"></script>
    <script type="text/javascript" src="node_modules/x-tag/dist/x-tag-core-with-shadowdom.min.js"></script>
    <script type="text/javascript" src="node_modules/lavenderjs/lib/lavenderJS-UMD.min.js"></script>
    <script type="text/javascript" src="node_modules/lotusjs-components/lib/lotusJS-UMD.min.js"></script>
    <script language="JavaScript">
        var context = (function( xtag ){
            var context = new Lotus.Context(new Lavender.Config);
            context.componentMap.mapComponent('x-lotus-input', HTMLInputElement.prototype, Lotus.Input, xtag);
            return context;
        }( xtag ));
		//the following is an example of how you can mediate the component events that are dispatched.
		//Lotus tag instances do not inherit directly from the base you supply, instead their skins define their child elements and behaviors
		//As a result to receive specific component events you can access the lotusComponentInstance tht is exposed
		//A better alternative is to use https://www.npmjs.com/package/lotusjs-mvw and take advantage of component mediators
		window.onload = function() {
			var list = document.getElementsByTagName('x-lotus-input');
			var handler = {
				onChange:function(event){
					console.log('My callback function received value: ' + event.payload.target.value);
				}
			}
			for (var i = 0; i < list.length; i++) {
				//the lotus syntax for addEventListener is slightly different than that of DOM elements,
				//but it ensures the scope of this within a callback is always relative the the second parameter which is the object instance
				list[i].lotusComponentInstance.addEventListener(Lotus.InputEvent.CHANGE, handler, 'onChange')
			}
		};
    </script>
</head>
<body>

<h3 class="page-header">Lotus Web Components Input Controls</h3>


<div class="content-panel">
	<p>
		<label>Here's a plain old HTML input. Blah!</label><input type="text"/>
	</p>
	<p>
		Here are examples of lotus input components. The <code>x-lotus-input</code> tag extends the <code>input</code> tag. Our <code>x-lotus-input</code> is also mapped to a Lotus component in the call to <code>context.componentMap.mapComponent('x-lotus-input', HTMLButtonElement.prototype, Lotus.Input, xtag);</code>.A new isntance of <code>Lotus.Input</code> is attached to each tag instance. Open your concole to observe the change in values.
	</p>
	<x-lotus-input  data-template-url="templates/input.html" data-component-root='[data-skin-part="input"]' data-attribute-type="text"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input.html" data-component-root='[data-skin-part="input"]' data-attribute-type="checkbox"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input.html" data-component-root='[data-skin-part="input"]' data-attribute-type="button"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input.html" data-component-root='[data-skin-part="input"]' data-attribute-type="date"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input.html" data-component-root='[data-skin-part="input"]' data-attribute-type="email"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input.html" data-component-root='[data-skin-part="input"]' data-attribute-type="month"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input.html" data-component-root='[data-skin-part="input"]' data-attribute-type="number"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input.html" data-component-root='[data-skin-part="input"]' data-attribute-type="password"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input.html" data-component-root='[data-skin-part="input"]' data-attribute-type="radio"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input.html" data-component-root='[data-skin-part="input"]' data-attribute-type="range"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input.html" data-component-root='[data-skin-part="input"]' data-attribute-type="tel"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input.html" data-component-root='[data-skin-part="input"]' data-attribute-type="time"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input.html" data-component-root='[data-skin-part="input"]' data-attribute-type="url"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input.html" data-component-root='[data-skin-part="input"]' data-attribute-type="week"></x-lotus-input>
	<p>
		Changing the apperance of any input control instance is as simple as attaching a different skin. Below is the exact same custom set of tags with a different skin attached. All using the same set of selectors encapsulated with Shadow DOM. Imagine how many skins could be created without a single change to the component code.
	</p>
	<x-lotus-input  data-template-url="templates/input2.html" data-component-root='[data-skin-part="input"]' data-attribute-type="text"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input2.html" data-component-root='[data-skin-part="input"]' data-attribute-type="checkbox"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input2.html" data-component-root='[data-skin-part="input"]' data-attribute-type="button"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input2.html" data-component-root='[data-skin-part="input"]' data-attribute-type="date"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input2.html" data-component-root='[data-skin-part="input"]' data-attribute-type="email"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input2.html" data-component-root='[data-skin-part="input"]' data-attribute-type="month"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input2.html" data-component-root='[data-skin-part="input"]' data-attribute-type="number"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input2.html" data-component-root='[data-skin-part="input"]' data-attribute-type="password"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input2.html" data-component-root='[data-skin-part="input"]' data-attribute-type="radio"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input2.html" data-component-root='[data-skin-part="input"]' data-attribute-type="range"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input2.html" data-component-root='[data-skin-part="input"]' data-attribute-type="tel"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input2.html" data-component-root='[data-skin-part="input"]' data-attribute-type="time"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input2.html" data-component-root='[data-skin-part="input"]' data-attribute-type="url"></x-lotus-input>
	<x-lotus-input  data-template-url="templates/input2.html" data-component-root='[data-skin-part="input"]' data-attribute-type="week"></x-lotus-input>
	<p>
		The <code>x-lotus-input</code> tag exposes a single change event by default. In order to listen for that event you have to assign an event handler after the document loads. And example is below. However if you are serious about event mediation of we encourage you to check out <a href="https://www.npmjs.com/package/lotusjs-mvw">lotusjs-mvw</a>. This is a full blown MVW framework which comes with a mediator map for your components (and much more). This allows you to build application mediators that are mapped to your custom tags. Mediators can do all sorts of useful things like triggering business logic, dispatching application events to trigger commands, and setting up data binding within your surrounding application.
		<pre>
		<code>
//the following is an example of how you can mediate the component events that are dispatched.
//Lotus tag instances do not inherit directly from the base you supply, instead their skins define their child elements and behaviors
//As a result to receive specific component events you can access the lotusComponentInstance tht is exposed
//A better alternative is to use https://www.npmjs.com/package/lotusjs-mvw and take advantage of component mediators
window.onload = function() {
	var list = document.getElementsByTagName('x-lotus-input');
	var handler = {
	onChange:function(event){
		console.log('My callback function recieved value: ' + event.payload.target.value);
	}
	}
	for (var i = 0; i < list.length; i++) {
		//the lotus syntax for addEventListener is slightly different than that of DOM elements,
		//but it ensures the scope of this within a callback is always relative the the second parameter which is the object instance
		list[i].lotusComponentInstance.addEventListener(Lotus.InputEvent.CHANGE, handler, 'onChange')
	}
};
		</code>
		</pre>
	</p>
</div>

</body>
</html>